# Dockerfile for NestJS API (Development)
FROM node:22-alpine

WORKDIR /app

# Copy root package files
COPY package.json ./

# Copy workspace packages
COPY apps/api/package.json ./apps/api/

# Install dependencies (npm handles workspaces automatically)
RUN npm install --legacy-peer-deps

# Copy all source code
COPY apps/api ./apps/api

WORKDIR /app/apps/api

EXPOSE 3000

# Run NestJS in watch mode
CMD ["npm", "run", "start:dev"]
